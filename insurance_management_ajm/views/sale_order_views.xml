<odoo>
    <data>
        <!--<record id="view_sale_order_kanban_inherit" model="ir.ui.view">
            <field name="name">sale.order.kanban.inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_kanban"/>
            <field name="arch" type="xml">
                
        </record>-->
        <!-- Inherit the existing sale order form view -->
        <record id="view_sale_order_form_inherit" model="ir.ui.view">
            <field name="name">sale.order.form.inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <!-- Add your modifications to the existing view -->
                <xpath expr="//form/sheet/group" position="before">
                    <div class="oe_button_box" name="policy_button_box">
                        <div class="o_td_label">
                                <label for="is_policy" string="Insurance Policy"/>
                        </div>
                        <field name="is_policy" widget="boolean" options="{'terminology': 'switch'}" string="Policy"/>
                    </div>
                </xpath>
                <xpath expr="//form[1]/sheet[1]/group[1]" position="inside">
                    <!-- Control the visibility of other switch-based fields -->
                        <group name="general_polycy_info" string="General" attrs="{'invisible': [('is_policy', '=', False)]}">
                            <div class="o_td_label">
                                <label for="policy_number" string="Policy Number"/>
                            </div>
                            <field name="policy_number"/>
                            <div class="o_td_label">
                                <label for="policy_start_date" string="Start Date"/>
                            </div>
                            <field name="policy_start_date"/>
                            <div class="o_td_label">
                                <label for="policy_efective_date" string="Efective Date"/>
                            </div>
                            <field name="policy_efective_date"/>
                            <div class="o_td_label">
                                <label for="policy_binder_invoice" string="Binder Invoice"/>
                            </div>
                            <field name="policy_binder_invoice"/> 
                            <div class="o_td_label">
                                <label for="policy_premium_sent" string="Premium Sent"/>
                            </div> 
                            <field name="policy_premium_sent"/>
                            <group col="2">
                                <field name="policy_exp_date"/>
                                <field name="policy_auto_renew"/>
                            </group>
                            <group col="2">
                                <field name="policy_binder_id"/>
                                <field name="policy_bind_day"/>
                            </group>  
                            
                        </group> 
                        <group name="aditional_polycy_info" string="Additional" attrs="{'invisible': [('is_policy', '=', False)]}"> 
                            <field name="policy_agency_id"/>
                            <field name="policy_general_agency_id"/>
                            <field name="policy_carrier_id"/>
                            <field name="policy_mga"/>
                            <field name="policy_financial_id"/>
                            <field name="policy_next_due"/>
                            <field name="policy_paid_mga"/>
                            <field name="policy_amount_financed"/>
                        </group>
                        <group class="oe_subtotal_footer oe_right" colspan="2" name="policy_total" attrs="{'invisible': [('is_policy', '=', False)]}">
                            <field name="policy_premium"/>
                            <field name="policy_total"/>
                            <field name="policy_down_payment"/>
                            <field name="policy_fee"/>
                            <field name="policy_commission_total"/>  
                        </group>
                </xpath>
                <xpath expr="//field[@name='partner_shipping_id']" position="attributes">
                    <attribute name="invisible">1</attribute> 
                </xpath>
                <xpath expr="//field[@name='pricelist_id']" position="attributes">
                    <attribute name="invisible">1</attribute> 
                </xpath>
                <xpath expr="//field[@name='partner_invoice_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

        <record id="view_sale_order_policy_tree_custom" model="ir.ui.view">
            <field name="name">sale.order.tree.custom</field>
            <field name="model">sale.order</field>
            <field name="arch" type="xml">
                <tree string="Policies Sales" sample="1"
                    decoration-info="invoice_status == 'to invoice', is_policy == 'True'"
                    decoration-muted="state == 'cancel'">
                    <field name="message_needaction" invisible="1"/>
                    <field name="policy_number" readonly="1" decoration-bf="1"/>
                    <field name="name" string="Referen Sale" readonly="1"/>
                    <field name="policy_exp_date" optional="hide"/>
                    <field name="partner_id" readonly="1"/>
                    <field name="user_id" optional="show" widget="many2one_avatar_user"/>
                    <field name="activity_ids" widget="list_activity" optional="show"/>
                    <field name="policy_efective_date" optional="show"/>
                    <field name="company_id" groups="base.group_multi_company" optional="show" readonly="1"/>
                    <field name="amount_untaxed" sum="Total Tax Excluded" widget="monetary" optional="hide"/>
                    <field name="amount_tax" sum="Tax Total" widget="monetary" optional="hide"/>
                    <field name="amount_total" sum="Total Tax Included" widget="monetary" decoration-bf="1" optional="show"/>
                    <field name="invoice_status"
                        decoration-success="invoice_status == 'invoiced'"
                        decoration-info="invoice_status == 'to invoice'"
                        decoration-warning="invoice_status == 'upselling'"
                        widget="badge" optional="show"/>
                    <field name="tag_ids" optional="hide" widget="many2many_tags" options="{'color_field': 'color'}"/>
                    <field name="state" invisible="1"/>
                    <field name="is_policy" invisible="1"/>
                </tree>
            </field>
        </record>
    </data>
</odoo>
