<odoo>
    <data>
        <record id="view_sale_order_kanban_inherit" model="ir.ui.view">
            <field name="name">sale.order.kanban.inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_sale_order_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//templates/t[1]/div[1]" position="after">
                    <div class="o_td_label">
                        <field name="policy_display_tag" readonly="1"/>
                        <t t-if="record.policy_display_tag.raw_value == 'service'">
                            <field name="policy_number"/>
                        </t>
                    </div>
                </xpath>                
            </field>    
        </record>
        <!-- Inherit the existing sale order form view -->
        <record id="view_sale_order_form_inherit" model="ir.ui.view">
            <field name="name">sale.order.form.inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <!-- Add your modifications to the existing view -->
                <xpath expr="//form/sheet" position="inside">
                    <field name="policy_display_tag" invisible="1"/>
                    <div class="oe_button_box" name="button_box">
                        <button name="set_policy_tag" string="Policy" type="object" class="oe_stat_button" icon="fa-tag"/>
                        <button name="set_service_tag" string="Service" type="object" class="oe_stat_button" icon="fa-tag"/>
                    </div>
                </xpath>
                <xpath expr="//form[1]/sheet[1]/group[1]" position="inside">
                    <!-- Control the visibility of other switch-based fields -->
                        <group name="general_polycy_info" string="General" attrs="{'invisible': [('policy_display_tag', '=', 'service')]}">
                            <div class="o_td_label">
                                <label for="policy_number" string="Policy Number"/>
                            </div>
                            <field name="policy_number"/>
                            <div class="o_td_label">
                                <label for="policy_start_date" string="Start Date"/>
                            </div>
                            <field name="policy_start_date"/>
                            <div class="o_td_label">
                                <label for="policy_efective_date" string="Efective Date"/>
                            </div>
                            <field name="policy_efective_date"/>
                            <div class="o_td_label">
                                <label for="policy_binder_invoice" string="Binder Invoice"/>
                            </div>
                            <field name="policy_binder_invoice"/> 
                            <div class="o_td_label">
                                <label for="policy_premium_sent" string="Premium Sent"/>
                            </div> 
                            <field name="policy_premium_sent"/>
                            <group col="2">
                                <field name="policy_exp_date"/>
                                <field name="policy_auto_renew"/>
                            </group>
                            <group col="2">
                                <field name="policy_binder_id"/>
                                <field name="policy_bind_day"/>
                            </group>  
                            
                        </group> 
                        <group name="aditional_polycy_info" string="Additional" attrs="{'invisible': [('policy_display_tag', '=', 'service')]}"> 
                            <field name="policy_agency_id"/>
                            <field name="policy_general_agency_id"/>
                            <field name="policy_carrier_id"/>
                            <field name="policy_mga"/>
                            <field name="policy_financial_id"/>
                            <field name="policy_next_due"/>
                            <field name="policy_paid_mga"/>
                            <field name="policy_amount_financed"/>
                        </group>
                        <group class="oe_subtotal_footer oe_right" colspan="2" name="policy_total" attrs="{'invisible': [('policy_display_tag', '=', 'service')]}">
                            <field name="policy_premium"/>
                            <field name="policy_total"/>
                            <field name="policy_down_payment"/>
                            <field name="policy_fee"/>
                            <field name="policy_commission_total"/>  
                        </group>
                </xpath>
                <xpath expr="//field[@name='partner_shipping_id']" position="attributes">
                    <attribute name="invisible">1</attribute> 
                </xpath>
                <xpath expr="//field[@name='pricelist_id']" position="attributes">
                    <attribute name="invisible">1</attribute> 
                </xpath>
                <xpath expr="//field[@name='partner_invoice_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

        
    </data>
</odoo>
